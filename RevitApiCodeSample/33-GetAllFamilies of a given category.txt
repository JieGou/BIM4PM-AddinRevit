#region Get Families of a given Category
    // for http://forums.autodesk.com/t5/revit-api-forum/having-trouble-filtering-to-ost-titleblocks/m-p/6827759
    static bool FamilyFirstSymbolCategoryEquals(
      Family f,
      BuiltInCategory bic )
    {
      Document doc = f.Document;

      ISet<ElementId> ids = f.GetFamilySymbolIds();

      Category cat = (0 == ids.Count)
        ? null
        : doc.GetElement( ids.First<ElementId>() ).Category;

      return null != cat
        && cat.Id.IntegerValue.Equals( (int) bic );
    }

    static void GetFamiliesOfCategory(
      Document doc,
      BuiltInCategory bic )
    {
      // This does not work:

      //FilteredElementCollector collector
      //  = new FilteredElementCollector( doc );
      //ICollection<Element> titleFrames = collector
      //  .OfCategory( BuiltInCategory.OST_TitleBlocks )
      //  .OfClass( typeof( Family ) )
      //  .ToElements();

      IEnumerable<Family> families
        = new FilteredElementCollector( doc )
          .OfClass( typeof( Family ) )
          .Cast<Family>()
          .Where<Family>( f =>
            FamilyFirstSymbolCategoryEquals( f, bic ) );
    }
    #endregion // Get Families of a given Category